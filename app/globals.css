@import 'tailwindcss';

@custom-variant dark (@media (prefers-color-scheme: dark));

@theme {
  --color-primary: oklch(0.65 0.25 265);
  --color-primary-hover: oklch(0.6 0.25 265);
  --color-secondary: oklch(0.7 0.15 285);
  --color-accent: oklch(0.75 0.2 145);
  --color-background: oklch(0.98 0.01 285);
  --color-foreground: oklch(0.15 0.02 285);
  --color-muted: oklch(0.92 0.02 285);
  --color-muted-foreground: oklch(0.45 0.02 285);
  --color-border: oklch(0.88 0.02 285);
  --color-background-dark: oklch(0.12 0.02 285);
  --color-foreground-dark: oklch(0.95 0.01 285);
  --color-muted-dark: oklch(0.18 0.02 285);
  --color-muted-foreground-dark: oklch(0.6 0.02 285);
  --color-border-dark: oklch(0.25 0.02 285);
  --color-glass-light: oklch(0.98 0.01 285);
  --color-glass-dark: oklch(0.15 0.02 285);

  --shadow-glass: 0 8px 32px 0 rgb(0 0 0 / 0.1);

  --backdrop-blur-xs: 2px;
}

/*
  The default border color has changed to `currentcolor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentcolor);
  }
}

/* Utility classes */
@utility glass {
  backdrop-filter: blur(12px);
  background-color: oklch(0.98 0.01 285 / 0.7);
  border: 1px solid oklch(0.88 0.02 285 / 0.5);
  box-shadow: 0 8px 32px 0 rgb(0 0 0 / 0.1);

  @media (prefers-color-scheme: dark) {
    background-color: oklch(0.15 0.02 285 / 0.7);
    border-color: oklch(0.25 0.02 285 / 0.5);
  }
}
@utility glass-strong {
  backdrop-filter: blur(24px);
  background-color: oklch(0.98 0.01 285 / 0.9);
  border: 1px solid oklch(0.88 0.02 285);
  box-shadow: 0 10px 40px 0 rgb(0 0 0 / 0.2);

  @media (prefers-color-scheme: dark) {
    background-color: oklch(0.15 0.02 285 / 0.9);
    border-color: oklch(0.25 0.02 285);
  }
}
@utility scrollbar-hide {
  /* Custom Scrollbar Styles */
  &::-webkit-scrollbar {
    display: none;
  }
  -ms-overflow-style: none;
  scrollbar-width: none;
}
@utility scrollbar-thin {
  &::-webkit-scrollbar {
    width: 8px;
  }

  &::-webkit-scrollbar-track {
    background: transparent;
  }

  &::-webkit-scrollbar-thumb {
    background-color: oklch(0.25 0.02 250 / 0.3);
    border-radius: 4px;
  }

  &::-webkit-scrollbar-thumb:hover {
    background-color: oklch(0.25 0.02 250 / 0.5);
  }
  scrollbar-width: thin;
  scrollbar-color: oklch(0.25 0.02 250 / 0.3) transparent;
}

/* Base styles */
@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground antialiased;
    font-feature-settings: "rlig" 1, "calt" 1;
  }

  /* Dark mode */
  @media (prefers-color-scheme: dark) {
    body {
      @apply bg-background-dark text-foreground-dark;
    }
  }
}

/* Animation keyframes */
@keyframes fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slide-up {
  from {
    transform: translateY(10px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes slide-down {
  from {
    transform: translateY(-10px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes scale-in {
  from {
    transform: scale(0.95);
    opacity: 0;
  }
  to {
    transform: scale(1);
    opacity: 1;
  }
}

/* Landing page gradient animation */
@keyframes gradient-shift {
  0%,
  100% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
}

@keyframes float {
  0%,
  100% {
    transform: translateY(0px);
  }
  50% {
    transform: translateY(-20px);
  }
}

@keyframes pulse-glow {
  0%,
  100% {
    opacity: 0.5;
  }
  50% {
    opacity: 1;
  }
}

.animated-gradient {
  background: linear-gradient(
    -45deg,
    oklch(0.15 0.05 250),
    oklch(0.2 0.08 280),
    oklch(0.15 0.06 300),
    oklch(0.18 0.04 250)
  );
  background-size: 400% 400%;
  animation: gradient-shift 15s ease infinite;
}

/* ============================================
   Liquid Glass Morphism System (2026)
   ============================================ */

/* Liquid morphing border radius animation */
@keyframes liquid-morph {
  0%,
  100% {
    border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%;
  }
  50% {
    border-radius: 30% 60% 70% 40% / 50% 60% 30% 60%;
  }
}

/* Glow pulse animation */
@keyframes glow-pulse {
  0%,
  100% {
    box-shadow: 0 0 20px oklch(0.55 0.2 265 / 0.3);
  }
  50% {
    box-shadow: 0 0 30px oklch(0.55 0.2 265 / 0.5);
  }
}

/* Liquid glass base effect */
.liquid-glass {
  backdrop-filter: blur(20px) saturate(180%);
  -webkit-backdrop-filter: blur(20px) saturate(180%);
  background: linear-gradient(
    135deg,
    oklch(0.22 0.04 250 / 0.6),
    oklch(0.16 0.03 265 / 0.7),
    oklch(0.12 0.02 280 / 0.85)
  );
  background-size: 200% 200%;
  animation: gradient-shift 15s ease infinite;
  border: 1px solid oklch(0.35 0.03 265 / 0.3);
}

/* Elevated liquid glass (modals, overlays) */
.liquid-glass-elevated {
  backdrop-filter: blur(28px) saturate(200%);
  -webkit-backdrop-filter: blur(28px) saturate(200%);
  background: linear-gradient(
    135deg,
    oklch(0.2 0.04 250 / 0.7),
    oklch(0.15 0.035 265 / 0.8),
    oklch(0.12 0.025 280 / 0.92)
  );
  border: 1px solid oklch(0.4 0.04 265 / 0.35);
  box-shadow:
    0 8px 40px oklch(0 0 0 / 0.5),
    0 0 80px oklch(0.5 0.15 265 / 0.08),
    inset 0 1px 0 oklch(1 0 0 / 0.08),
    inset 0 -1px 0 oklch(0 0 0 / 0.15);
}

/* Animated gradient border */
.liquid-border {
  position: relative;
}

.liquid-border::before {
  content: "";
  position: absolute;
  inset: 0;
  padding: 1.5px;
  border-radius: inherit;
  background: linear-gradient(
    135deg,
    oklch(0.65 0.25 265 / 0.5),
    oklch(0.6 0.22 285 / 0.4),
    oklch(0.55 0.2 310 / 0.5),
    oklch(0.65 0.25 265 / 0.5)
  );
  background-size: 300% 300%;
  animation: gradient-shift 6s ease infinite;
  -webkit-mask:
    linear-gradient(#fff 0 0) content-box,
    linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  pointer-events: none;
}

/* Glass card surface - visible contrast against modal background */
.glass-card {
  backdrop-filter: blur(16px) saturate(150%);
  -webkit-backdrop-filter: blur(16px) saturate(150%);
  background: linear-gradient(
    145deg,
    oklch(0.22 0.03 255 / 0.55),
    oklch(0.17 0.025 265 / 0.65)
  );
  border: 1px solid oklch(0.38 0.035 265 / 0.25);
  box-shadow:
    0 4px 24px oklch(0 0 0 / 0.3),
    0 0 0 0.5px oklch(1 0 0 / 0.04),
    inset 0 1px 0 oklch(1 0 0 / 0.06);
}

/* Interactive glass (buttons, sidebar items) */
.glass-interactive {
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  background: oklch(0.2 0.03 260 / 0.5);
  border: 1px solid oklch(0.35 0.03 265 / 0.3);
  box-shadow:
    0 2px 12px oklch(0 0 0 / 0.15),
    inset 0 1px 0 oklch(1 0 0 / 0.04);
  transition: all 0.3s ease;
}

.glass-interactive:hover {
  background: oklch(0.25 0.035 260 / 0.6);
  border-color: oklch(0.42 0.04 265 / 0.4);
  box-shadow:
    0 4px 20px oklch(0 0 0 / 0.25),
    0 0 20px oklch(0.5 0.15 265 / 0.06),
    inset 0 1px 0 oklch(1 0 0 / 0.06);
}

/* Inset glass (sidebar, code blocks) */
.glass-inset {
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  background: oklch(0.1 0.02 260 / 0.6);
  border: 1px solid oklch(0.28 0.025 265 / 0.25);
  box-shadow:
    inset 0 2px 12px oklch(0 0 0 / 0.3),
    inset 0 1px 2px oklch(0 0 0 / 0.2);
}

/* Glow pulse utility */
.glow-pulse {
  animation: glow-pulse 2s ease-in-out infinite;
}

/* Custom settings scrollbar */
.settings-scrollbar::-webkit-scrollbar {
  width: 6px;
}

.settings-scrollbar::-webkit-scrollbar-track {
  background: oklch(0.1 0.015 260 / 0.3);
  border-radius: 3px;
}

.settings-scrollbar::-webkit-scrollbar-thumb {
  background: oklch(0.35 0.02 265 / 0.4);
  border-radius: 3px;
}

.settings-scrollbar::-webkit-scrollbar-thumb:hover {
  background: oklch(0.4 0.02 265 / 0.6);
}

/* ============================================
   World Formation Login Sequence
   ============================================ */

@keyframes structure-rise {
  from {
    transform: translateY(100%) scaleY(0.5);
    opacity: 0;
  }
  to {
    transform: translateY(0) scaleY(1);
    opacity: 1;
  }
}

@keyframes light-bloom {
  from {
    opacity: 0;
    transform: scale(0.3);
    filter: blur(30px);
  }
  to {
    opacity: 0.6;
    transform: scale(1);
    filter: blur(20px);
  }
}

@keyframes mist-drift {
  0%,
  100% {
    transform: translateX(-5%);
  }
  50% {
    transform: translateX(5%);
  }
}

@keyframes portal-ring-glow {
  0%,
  100% {
    box-shadow: 0 0 40px oklch(0.55 0.25 265 / 0.4),
      0 0 80px oklch(0.55 0.25 265 / 0.2);
  }
  50% {
    box-shadow: 0 0 60px oklch(0.55 0.25 265 / 0.6),
      0 0 120px oklch(0.55 0.25 265 / 0.3);
  }
}

@keyframes star-twinkle {
  0%,
  100% {
    opacity: 0.3;
  }
  50% {
    opacity: 1;
  }
}

/* ── Points System Keyframes ────────────────────────────── */

@keyframes points-pop {
  0% {
    transform: scale(0.8);
    opacity: 0;
  }
  50% {
    transform: scale(1.15);
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

@keyframes points-shimmer {
  0% {
    background-position: -200% center;
  }
  100% {
    background-position: 200% center;
  }
}

@keyframes points-float-up {
  0% {
    transform: translateY(0) scale(1);
    opacity: 1;
  }
  100% {
    transform: translateY(-40px) scale(0.8);
    opacity: 0;
  }
}

@keyframes ring-fill {
  from {
    stroke-dashoffset: var(--ring-circumference, 88);
  }
  to {
    stroke-dashoffset: var(--ring-offset, 0);
  }
}

@keyframes hint-pulse {
  0%, 100% {
    opacity: 0.4;
  }
  50% {
    opacity: 0.7;
  }
}

@media (prefers-reduced-motion: reduce) {
  .animated-gradient,
  .liquid-glass,
  .liquid-border::before {
    animation: none;
  }

  .glow-pulse {
    animation: none;
  }

  @keyframes float {
    0%,
    100% {
      transform: translateY(0px);
    }
  }

  @keyframes pulse-glow {
    0%,
    100% {
      opacity: 0.7;
    }
  }

  @keyframes structure-rise {
    from, to {
      transform: none;
      opacity: 1;
    }
  }

  @keyframes light-bloom {
    from, to {
      opacity: 0.6;
      transform: none;
      filter: none;
    }
  }

  @keyframes mist-drift {
    from, to {
      transform: none;
    }
  }

  @keyframes portal-ring-glow {
    from, to {
      box-shadow: 0 0 40px oklch(0.55 0.25 265 / 0.4);
    }
  }

  @keyframes star-twinkle {
    from, to {
      opacity: 0.7;
    }
  }

  @keyframes points-pop {
    from, to {
      transform: none;
      opacity: 1;
    }
  }

  @keyframes points-shimmer {
    from, to {
      background-position: center;
    }
  }

  @keyframes points-float-up {
    from, to {
      transform: none;
      opacity: 1;
    }
  }

  @keyframes hint-pulse {
    from, to {
      opacity: 0.5;
    }
  }
}

/* ── Idle State: pause CSS animations to save CPU ──────── */

html.idle .animated-gradient,
html.idle .liquid-glass,
html.idle .liquid-border::before {
  animation-play-state: paused !important;
}

html.idle .glow-pulse {
  animation-play-state: paused !important;
}

/* Pause points system animations when idle */
html.idle [data-points-animation],
html.idle [data-presence-trail] {
  animation-play-state: paused !important;
  transition: none !important;
}

/* Reduce will-change and compositing layers when idle */
html.idle .will-change-transform {
  will-change: auto !important;
}

/* ============================================
   Parent Dashboard - Light Theme
   ============================================ */

.parent-dashboard {
  --pd-bg: oklch(0.97 0.005 250);
  --pd-bg-secondary: oklch(0.94 0.008 250);
  --pd-surface: oklch(1.0 0 0);
  --pd-text: oklch(0.20 0.02 250);
  --pd-text-secondary: oklch(0.35 0.015 250);
  --pd-text-muted: oklch(0.50 0.015 250);
  --pd-border: oklch(0.88 0.01 250);
  --pd-border-hover: oklch(0.80 0.015 250);
  --pd-primary: oklch(0.55 0.15 240);
  --pd-primary-light: oklch(0.92 0.04 240);
  --pd-primary-hover: oklch(0.50 0.15 240);
  --pd-success: oklch(0.55 0.15 155);
  --pd-success-light: oklch(0.92 0.04 155);
  --pd-warning: oklch(0.60 0.15 85);
  --pd-warning-light: oklch(0.92 0.04 85);
  --pd-danger: oklch(0.55 0.18 25);
  --pd-danger-light: oklch(0.92 0.04 25);
  --pd-accent: oklch(0.55 0.12 170);
  --pd-sidebar: oklch(0.99 0.003 250);
  --pd-sidebar-active: oklch(0.94 0.02 240);

  background-color: var(--pd-bg);
  color: var(--pd-text);
  min-height: 100vh;
}

.parent-dashboard.pd-dark {
  --pd-bg: oklch(0.13 0.01 250);
  --pd-bg-secondary: oklch(0.10 0.01 250);
  --pd-surface: oklch(0.17 0.01 250);
  --pd-text: oklch(0.92 0.005 250);
  --pd-text-secondary: oklch(0.75 0.008 250);
  --pd-text-muted: oklch(0.58 0.01 250);
  --pd-border: oklch(0.25 0.01 250);
  --pd-border-hover: oklch(0.32 0.015 250);
  --pd-primary: oklch(0.60 0.15 240);
  --pd-primary-light: oklch(0.22 0.04 240);
  --pd-primary-hover: oklch(0.65 0.15 240);
  --pd-success: oklch(0.60 0.15 155);
  --pd-success-light: oklch(0.20 0.04 155);
  --pd-warning: oklch(0.65 0.15 85);
  --pd-warning-light: oklch(0.20 0.04 85);
  --pd-danger: oklch(0.60 0.18 25);
  --pd-danger-light: oklch(0.20 0.04 25);
  --pd-accent: oklch(0.60 0.12 170);
  --pd-sidebar: oklch(0.15 0.008 250);
  --pd-sidebar-active: oklch(0.22 0.02 240);
}

.pd-card {
  background-color: var(--pd-surface);
  border: 1px solid var(--pd-border);
  border-radius: 12px;
  box-shadow: 0 1px 3px oklch(0 0 0 / 0.05), 0 1px 2px oklch(0 0 0 / 0.03);
  transition: box-shadow 0.2s ease;
}

.pd-card-hover:hover {
  box-shadow: 0 4px 12px oklch(0 0 0 / 0.08), 0 2px 4px oklch(0 0 0 / 0.04);
}

.pd-scrollbar::-webkit-scrollbar {
  width: 6px;
}
.pd-scrollbar::-webkit-scrollbar-track {
  background: var(--pd-bg-secondary);
  border-radius: 3px;
}
.pd-scrollbar::-webkit-scrollbar-thumb {
  background: oklch(0.78 0.01 250);
  border-radius: 3px;
}
.pd-scrollbar::-webkit-scrollbar-thumb:hover {
  background: oklch(0.68 0.01 250);
}

@media print {
  .parent-dashboard .pd-no-print {
    display: none !important;
  }
  .parent-dashboard {
    background: white !important;
    color: black !important;
  }
  .pd-card {
    box-shadow: none !important;
    border: 1px solid #ddd !important;
    break-inside: avoid;
  }
}
